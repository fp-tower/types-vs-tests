<!DOCTYPE html>
<html>
  <head>
    <title>Types vs Tests</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif', 'Helvetica'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz', 'Gill Sans';
        font-weight: normal;
      }
      .pull-left {
      float: left;
      width: 47%;
      }
      .pull-right {
      float: right;
      width: 47%;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono', 'Consolas', 'Courier New'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Types vs Tests
`@JulienTruffaut`

---
class: center, middle

# Types

---
# Types

// TODO diagram type is a set of a values e.g. Boolean, String

---
# Functions

// TODO diagram function with input / output type

---
# Functional programming subset

* no side effect
* no mutation
* no null
* no exceptions
* no reflection

---
# Untyped language (Javascript)

```javascript
function increment(x){
  return x + 1;
}
```

--

```javascript
increment(2)
3
```

--

```javascript
increment(1.1)
2.1
```

--

```javascript
increment("hello")
"hello1"
```

--

```javascript
increment('c')
"c1"
```

---
# Typed language (Scala)

```tut:silent
def increment(x: Int): Int = x + 1
```

--

```tut
increment(2)
```

--

```tut:fail
increment(1.1)
increment("hello")
```

---
# Typed language (Scala)

```tut:silent
def increment(x: Int): Int = x + 1
def increment(x: Double): Double = x + 1
```

```tut:invisible
object Increment {
  def increment(x: Int): Int = x + 1
  def increment(x: Double): Double = x + 1
}
import Increment._
```

```tut
increment(1)
increment(1.1)
```

???
Types:
* documentation
* avoid certain kind of error => less tests (how much?)

---
class: center, middle

# Tests

---
# Unit Tests

```tut:silent
increment(0) == 1
increment(1) == 2
increment(5) == 6
```

// TODO diagram function f(x) = x + 1 with a few dots for point tested

---
# Unit Tests

```tut:silent
increment(0) == 1
increment(1) == 2
increment(5) == 6
```

// TODO diagram function
// x < 0, f(x) = 0
// x >= 0, f(x) = x + 1

---
# Property Tests

```tut:silent
import org.scalacheck.Prop.forAll

forAll { (x: Int) => increment(x) > x }
```

---
class: center, middle

# Types and Tests?

---
# Types

// TODO diagram A is a set of values, e.g. Boolean, String

---
# Functions

// TODO diagram function A => B

---
# Functions have types!

// TODO diagram type of A => B

---
# Fully tested function

.pull-left[
```scala
increment(-2147483648) == -2147483647
increment(-2147483647) == -2147483646
// ...
increment(0) == 1
increment(1) == 2
increment(2) == 3
// ...
increment(2147483646) ==  2147483647
increment(2147483647) == -2147483648
```
]

--

.pull-right[
// TODO diagram A => B with a single dot remaining
]

---
# Compromise

```scala
increment(-10) == 9
increment(0) == 1
increment(1) == 2
increment(2147483647) == -2147483648
```

---
# Fully tested function

```tut:silent
def negate(b: Boolean): Boolean =
  if(b) false else true
```

--

```tut
negate(true)  == false
negate(false) == true
```

---
# Fully tested function

```tut:silent
sealed trait DayOfTheWeek
object DayOfTheWeek {
  case object Monday    extends DayOfTheWeek
  case object Tuesday   extends DayOfTheWeek
  case object Wednesday extends DayOfTheWeek
  case object Thursday  extends DayOfTheWeek
  case object Friday    extends DayOfTheWeek
  case object Saturday  extends DayOfTheWeek
  case object Sunday    extends DayOfTheWeek
}

def nextDay(b: DayOfTheWeek): DayOfTheWeek = ???
```

--

```scala
import DayOfTheWeek._

nextDay(Monday)  == Tuesday
nextDay(Tuesday) == Wednesday
// ...
nextDay(Sunday)  == Monday
```

---
# Functions have types!

Let `|A|` be the number of values of type `A`

How to calculate `|A => B|` ? e.g. `|Int => Int|`

---
class: center, middle

# Thanks!
Code and slides at `julien-truffaut/types-vs-tests` on GitHub

## Questions?


 </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
