<!DOCTYPE html>
<html>
  <head>
    <title>Types vs Tests</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif', 'Helvetica'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz', 'Gill Sans';
        font-weight: normal;
      }
      .pull-left {
      float: left;
      width: 47%;
      }
      .pull-right {
      float: right;
      width: 47%;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono', 'Consolas', 'Courier New'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Types vs Tests
`@JulienTruffaut`

---
class: center, middle

# Types

---
background-image: url(img/types-1.jpg)

# Types

---
background-image: url(img/types-2.jpg)

# Types

---
# Types


```scala
val x: Int = 5

val foo: String = "Hello World"
```

--

```scala
scala> val x: Int = "Hello World"
<console>:12: error: type mismatch;
 found   : String("Hello World")
 required: Int
       val x: Int = "Hello World"
                    ^
```

---
background-image: url(img/function.jpg)

# Functions

---
# Functional programming subset

* not nondeterministic (deterministic)
* not partial (total)
* no side effect
* no mutation
* no exception
* no null
* no reflection

---
# Statically typed function

```scala
def increment(x: Int): Int = x + 1
```

--

```scala
scala> increment(2)
res0: Int = 3
```

--

```scala
scala> increment(1.1)
<console>:14: error: type mismatch;
 found   : Double(1.1)
 required: Int
       increment(1.1)
                 ^

scala> increment("hello")
<console>:14: error: type mismatch;
 found   : String("hello")
 required: Int
       increment("hello")
                 ^
```

---
class: center, middle

# Tests

---
class: center, middle

# Unit Test

---
# Unit Test

```scala
increment( 0) ==  1
increment( 1) ==  2
increment(-3) == -2
```

---
background-image: url(img/increment-math-unit-test-1.jpg)

# Unit Test

---
background-image: url(img/increment-math-unit-test-fail.jpg)

# Unit Test

---
background-image: url(img/increment-math-unit-test-2.jpg)

# Unit Test

---
class: center, middle

# Property Test

---
# Property Test

```scala
import org.scalacheck.Prop.forAll

forAll { (x: Int) => increment(x) > x }
```

---
background-image: url(img/increment-math-property-test-1.jpg)
# Property Test

---
background-image: url(img/increment-math-property-test-2.jpg)
# Property Test

---
background-image: url(img/increment-math-property-test-fail.jpg)
# Property Test

---
background-image: url(img/increment-math-property-test-3.jpg)
# Property Test

---
class: center, middle

# Types and Tests?

---
# Untyped language (Javascript)

```javascript
function increment(x){
  return x + 1;
}
```

--

```javascript
increment(2)
3
```

--

```javascript
increment(1.1)
2.1
```

--

```javascript
increment("hello")
"hello1"
```

--

```javascript
increment('c')
"c1"
```

---
# Typed language (Scala)

```scala
def increment(x: Int): Int = x + 1
```

--

```scala
scala> increment(1.1)
<console>:15: error: type mismatch;
 found   : Double(1.1)
 required: Int
       increment(1.1)
                 ^

scala> increment("hello")
<console>:15: error: type mismatch;
 found   : String("hello")
 required: Int
       increment("hello")
                 ^
```

---
class: center, middle

# Types constrain the implementation such as we have less tests to write

---
class: center, middle

# How much?

---
class: center, middle

# Are all types equals?


---
background-image: url(img/types-1.jpg)

# Types

---
class: center, middle

# A => B

---
background-image: url(img/int-to-int-type.jpg)

# Functions have types!

---
background-image: url(img/int-to-int-type-test-1.jpg)

# Unit test

---
background-image: url(img/int-to-int-type-test-2.jpg)

# Unit test

---
background-image: url(img/int-to-int-type-test-3.jpg)

# Fully tested function


---
# Fully tested function

```scala
def negate(b: Boolean): Boolean =
  if(b) false else true
```

--

```scala
scala> negate(true)  == false
res9: Boolean = true

scala> negate(false) == true
res10: Boolean = true
```

---
# Fully tested function

```scala
sealed trait DayOfTheWeek
object DayOfTheWeek {
  case object Monday    extends DayOfTheWeek
  case object Tuesday   extends DayOfTheWeek
  case object Wednesday extends DayOfTheWeek
  case object Thursday  extends DayOfTheWeek
  case object Friday    extends DayOfTheWeek
  case object Saturday  extends DayOfTheWeek
  case object Sunday    extends DayOfTheWeek
}

def nextDay(b: DayOfTheWeek): DayOfTheWeek = ???
```

--

```scala
import DayOfTheWeek._

nextDay(Monday)  == Tuesday
nextDay(Tuesday) == Wednesday
// ...
nextDay(Sunday)  == Monday
```

---
background-image: url(img/foo-to-bar-1.jpg)

# Compromise

---
background-image: url(img/foo-to-bar-2.jpg)

---
# Functions have types!

Let `|A|` be the number of values of type `A`

How to calculate `|A => B|` ? e.g. `|Int => Int|`

---
class: center, middle

# Thanks!
Code and slides at `julien-truffaut/types-vs-tests` on GitHub

## Questions?


 </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
        var slideshow = remark.create({
            ratio: "16:9"
        });
    </script>
  </body>
</html>
